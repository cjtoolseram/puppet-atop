---
sudo: required
language: ruby
cache: bundler
bundler_args: --without system_tests
before_install:
  - bundle -v
  - rm Gemfile.lock || true
  - gem update --system
  - gem update bundler
  - gem --version
  - bundle -v
script: ["bundle exec rake validate", "bundle exec rake lint", "bundle exec rake spec SPEC_OPTS='--format documentation'"]
matrix:
  include:
  - rvm: default
    sudo: required
    dist: trusty
    services: docker
    env: PUPPET_GEM_VERSION='~> 4.7.0' BEAKER_set="debian-8_docker"
    script: 'bundle exec rspec spec/acceptance'
  - rvm: default
    sudo: required
    dist: trusty
    services: docker
    env: PUPPET_GEM_VERSION='~> 4.7.0' BEAKER_set="centos-7_docker"
    script: 'gem list ; bundle exec rspec spec/acceptance'
notifications:
  email: false